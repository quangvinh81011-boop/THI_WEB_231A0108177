<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i 02 - Game ƒêo√°n S·ªë</title>
    <!-- T·∫£i Tailwind CSS ƒë·ªÉ ƒë·ªãnh d·∫°ng -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* N·ªÅn xanh nh·∫°t */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* Hi·ªáu ·ª©ng Confetti ƒë∆°n gi·∫£n b·∫±ng CSS */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 20px;
            background-color: var(--color);
            opacity: 0;
            animation: fall 3s ease-in infinite;
        }

        @keyframes fall {
            0% {
                opacity: 1;
                transform: translateY(-100px) rotateZ(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotateZ(1080deg);
            }
        }

        /* ƒê·ªãnh nghƒ©a m√†u v√† ƒë·ªô tr·ªÖ cho c√°c mi·∫øng confetti */
        .confetti:nth-child(3n + 1) { background-color: #f6e05e; animation-delay: 0s; left: 10%; }
        .confetti:nth-child(3n + 2) { background-color: #63b3ed; animation-delay: 0.5s; left: 40%; }
        .confetti:nth-child(3n + 3) { background-color: #fc8181; animation-delay: 1s; left: 70%; }
        .confetti:nth-child(5n + 1) { background-color: #9f7aea; animation-delay: 0.3s; left: 25%; width: 8px; height: 16px; }
        .confetti:nth-child(5n + 2) { background-color: #48bb78; animation-delay: 0.8s; left: 60%; width: 12px; height: 24px; }
        .confetti:nth-child(5n + 3) { background-color: #f6ad55; animation-delay: 1.2s; left: 85%; width: 9px; height: 18px; }
    </style>
</head>
<body>

    <main class="bg-white p-8 md:p-12 rounded-2xl shadow-2xl w-full max-w-md text-center">
        <h1 class="text-3xl md:text-4xl font-extrabold mb-4 text-indigo-700">GAME ƒêO√ÅN S·ªê</h1>
        <p class="text-gray-600 mb-6">ƒêo√°n m·ªôt s·ªë ng·∫´u nhi√™n t·ª´ <span class="font-bold text-lg text-indigo-500">50</span> ƒë·∫øn <span class="font-bold text-lg text-indigo-500">150</span>.</p>

        <!-- Khu v·ª±c nh·∫≠p li·ªáu -->
        <div id="input-area" class="space-y-4">
            <input 
                type="number" 
                id="guessInput" 
                min="50" 
                max="150" 
                placeholder="Nh·∫≠p s·ªë b·∫°n ƒëo√°n (50-150)" 
                class="w-full p-3 border-2 border-indigo-300 rounded-lg text-center text-xl focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition duration-200"
            >
            <button 
                id="checkButton" 
                onclick="checkGuess()" 
                class="w-full py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-[1.01]"
            >
                Ki·ªÉm Tra
            </button>
        </div>

        <!-- K·∫øt qu·∫£ v√† th√¥ng b√°o -->
        <div class="mt-8 space-y-4">
            <p id="message" class="text-xl font-semibold min-h-[30px]"></p>
            <p class="text-gray-500">S·ªë l·∫ßn th·ª≠: <span id="attempts" class="font-bold text-indigo-600">0</span></p>
            
            <!-- N√∫t ch∆°i l·∫°i (·∫®n ban ƒë·∫ßu) -->
            <button 
                id="restartButton" 
                onclick="initializeGame()" 
                class="hidden w-full py-3 bg-green-500 text-white font-bold rounded-lg shadow-md hover:bg-green-600 transition duration-300 transform hover:scale-[1.01]"
            >
                Ch∆°i L·∫°i
            </button>
        </div>
    </main>
    
    <!-- Container cho Confetti Animation -->
    <div id="confetti" class="confetti-container hidden">
        <div class="confetti" style="left: 10%;"></div>
        <div class="confetti" style="left: 20%;"></div>
        <div class="confetti" style="left: 30%;"></div>
        <div class="confetti" style="left: 40%;"></div>
        <div class="confetti" style="left: 50%;"></div>
        <div class="confetti" style="left: 60%;"></div>
        <div class="confetti" style="left: 70%;"></div>
        <div class="confetti" style="left: 80%;"></div>
        <div class="confetti" style="left: 90%;"></div>
        <div class="confetti" style="left: 5%;"></div>
        <div class="confetti" style="left: 95%;"></div>
    </div>

    <script>
        let targetNumber;
        let attempts;
        let isGameOver = false;
        
        const MIN_RANGE = 50;
        const MAX_RANGE = 150;

        // L·∫•y c√°c ph·∫ßn t·ª≠ DOM
        const messageElement = document.getElementById('message');
        const attemptsElement = document.getElementById('attempts');
        const guessInput = document.getElementById('guessInput');
        const checkButton = document.getElementById('checkButton');
        const restartButton = document.getElementById('restartButton');
        const confettiContainer = document.getElementById('confetti');

        /**
         * Logic t∆∞ duy: T·∫°o s·ªë ng·∫´u nhi√™n
         * C√¥ng th·ª©c: Math.floor(Math.random() * (max - min + 1)) + min
         * (150 - 50 + 1) = 101 => T·∫°o s·ªë nguy√™n ng·∫´u nhi√™n t·ª´ 0 ƒë·∫øn 100, sau ƒë√≥ c·ªông th√™m 50.
         */
        function generateRandomNumber() {
            return Math.floor(Math.random() * (MAX_RANGE - MIN_RANGE + 1)) + MIN_RANGE;
        }

        // Kh·ªüi t·∫°o/Kh√¥i ph·ª•c game
        function initializeGame() {
            targetNumber = generateRandomNumber();
            attempts = 0;
            isGameOver = false;

            // ƒê·∫∑t l·∫°i giao di·ªán
            messageElement.textContent = 'H√£y b·∫Øt ƒë·∫ßu ƒëo√°n s·ªë!';
            messageElement.classList.remove('text-green-600', 'text-red-600');
            attemptsElement.textContent = attempts;
            guessInput.value = '';
            guessInput.disabled = false;
            checkButton.classList.remove('hidden');
            restartButton.classList.add('hidden');
            confettiContainer.classList.add('hidden'); // ·∫®n confetti
            
            // Log target number for debugging (optional in real game)
            console.log('S·ªë ng·∫´u nhi√™n m·ªõi: ' + targetNumber);
        }

        /**
         * Logic t∆∞ duy: X·ª≠ l√Ω Input v√† so s√°nh
         * - B∆∞·ªõc 1: L·∫•y v√† chuy·ªÉn ƒë·ªïi gi√° tr·ªã input th√†nh s·ªë nguy√™n.
         * - B∆∞·ªõc 2: X·ª≠ l√Ω l·ªói (Validation) - ƒê·∫£m b·∫£o gi√° tr·ªã l√† s·ªë h·ª£p l·ªá v√† n·∫±m trong ph·∫°m vi (50-150).
         * - B∆∞·ªõc 3: So s√°nh v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i game/th√¥ng b√°o.
         */
        function checkGuess() {
            if (isGameOver) return; // NgƒÉn ch·∫∑n ƒëo√°n ti·∫øp khi game k·∫øt th√∫c

            // B∆∞·ªõc 1: L·∫•y v√† chuy·ªÉn ƒë·ªïi gi√° tr·ªã
            const guess = parseInt(guessInput.value);

            // B∆∞·ªõc 2: X·ª≠ l√Ω l·ªói (Validation)
            if (isNaN(guess) || guess < MIN_RANGE || guess > MAX_RANGE) {
                messageElement.textContent = `L·ªói: Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá t·ª´ ${MIN_RANGE} ƒë·∫øn ${MAX_RANGE}.`;
                messageElement.classList.add('text-red-600');
                return; // D·ª´ng h√†m n·∫øu input kh√¥ng h·ª£p l·ªá
            }

            // TƒÉng s·ªë l·∫ßn th·ª≠
            attempts++;
            attemptsElement.textContent = attempts;
            messageElement.classList.remove('text-red-600'); // X√≥a m√†u ƒë·ªè n·∫øu l√† l·ªói tr∆∞·ªõc ƒë√≥

            // B∆∞·ªõc 3: So s√°nh v√† c·∫≠p nh·∫≠t th√¥ng b√°o
            if (guess === targetNumber) {
                // ƒêo√°n ƒë√∫ng
                messageElement.textContent = `üéâ CH√öC M·ª™NG! B·∫°n ƒë√£ ƒëo√°n ƒë√∫ng s·ªë ${targetNumber} ch·ªâ sau ${attempts} l·∫ßn th·ª≠!`;
                messageElement.classList.add('text-green-600');
                isGameOver = true;
                
                // V√¥ hi·ªáu h√≥a input v√† hi·ªÉn th·ªã n√∫t ch∆°i l·∫°i
                guessInput.disabled = true;
                checkButton.classList.add('hidden');
                restartButton.classList.remove('hidden');

                // Hi·ªÉn th·ªã Confetti Animation
                confettiContainer.classList.remove('hidden');
                
                // T·ª± ƒë·ªông ·∫©n confetti sau 4 gi√¢y
                setTimeout(() => {
                    confettiContainer.classList.add('hidden');
                }, 4000);

            } else if (guess < targetNumber) {
                // Qu√° th·∫•p
                messageElement.textContent = 'S·ªë b·∫°n ƒëo√°n QU√Å TH·∫§P. H√£y th·ª≠ l·∫°i!';
                
            } else {
                // Qu√° cao
                messageElement.textContent = 'S·ªë b·∫°n ƒëo√°n QU√Å CAO. H√£y th·ª≠ l·∫°i!';
            }
            
            // X√≥a input sau khi ƒëo√°n
            guessInput.value = '';
        }

        // G√°n s·ª± ki·ªán cho ph√≠m Enter
        guessInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh c·ªßa Enter (n·∫øu c√≥)
                checkGuess();
            }
        });

        // Kh·ªüi ch·∫°y game khi t·∫£i trang
        initializeGame();
    </script>
</body>
</html>